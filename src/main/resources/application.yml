server:
  port: 8082
  max-http-request-header-size: 15000
app:
  # 全局开关：是否启用 AI 功能（生产环境默认关闭）
  ai:
    enabled: false
  # 全局开关：是否启用邮件发送（生产环境默认关闭）
  mail:
    enabled: false
  googleai:
    api:
      prompt-template: ${GOOGLE_API_TEXT_PROMPT}
      model: ${GOOGLE_API_MODEL}
      projectId: ${GOOGLE_API_PROJECT_ID}
      location: ${GOOGLE_API_LOCATION}
  front-url: http://localhost:3000
  payment:
    alipay:
      service-provider-url: ${ALIPAY_PROVIDER_URL:http://chatim.natapp1.cc/apiv2/payment/pay}
      pay-channel: ${ALIPAY_PAY_CHANNEL:1}
      type-index: ${ALIPAY_TYPE_INDEX:2}
      external-id: ${ALIPAY_EXTERNAL_ID:888002}
      external-goods-type: ${ALIPAY_EXTERNAL_GOODS_TYPE:9}
      gateway-url: https://openapi.alipay.com/gateway.do
      app-id: ${ALIPAY_APP_ID}
      private-key: ${ALIPAY_APP_PRIVATE_KEY}
      alipay-public-key: ${ALIPAY_PUBLIC_KEY}
      notify-url: ${ALIPAY_NOTIFY_URL:http://localhost:8082/api/v1/checkout/alipay/notify}
      return-url: ${ALIPAY_RETURN_URL:http://localhost:3000/payment/success}
      risk-control-notify-url: ${ALIPAY_RISK_NOTIFY_URL:}
      quit-url: ${ALIPAY_QUIT_URL:}
      sub-merchant-id: ${ALIPAY_SUB_MERCHANT_ID}
      sign-type: RSA2
      charset: utf-8
      format: json
      timeout-express: 15m
      product-code: FACE_TO_FACE_PAYMENT
jwt:
  auth:
    converter:
      # Keycloak clientId used to extract roles from token resource_access.
      resource-id: myclient
      # Claim used as principal name (mapped to Authentication.getName()).
      principal-attribute: preferred_username
auth:
  keycloak:
    enabled: true
  local:
    enabled: true
    issuer: grid-local
    token-ttl: 2h
    hmac-secret: ${LOCAL_JWT_SECRET:change-me-please-change-me-please-32}
spring:
  # 邮件发送配置（基于 Spring Boot Mail 自动配置）
  # 用于发送通知/验证码等邮件；账号与密码建议通过环境变量注入
  mail:
    # SMTP 服务器地址（此处为 Outlook）
    host: smtp-mail.outlook.com
    # SMTP 端口（TLS 常用 587）
    port: 587
    # 发件人账号（运行时从环境变量读取）
    username: ${EMAIL_USERNAME}
    # 发件人密码或应用专用密码
    password: ${EMAIL_PASSWORD}
    properties:
      mail:
        smtp:
          # 启用 SMTP 认证
          auth: true
          starttls:
            # 启用 STARTTLS
            enable: true
  security:
    oauth2:
      resourceserver:
        jwt:
          issuer-uri: ${KEYCLOAK_ISSUER_URI:http://localhost:8080/realms/grid}
  datasource:
    username: ${DB_USERNAME}
    url: ${DB_URL}
    password: ${DB_PASSWORD}
  jpa:
    generate-ddl: 'false'
  jackson:
    property-naming-strategy: LOWER_CAMEL_CASE
  flyway:
    enabled: 'false'
springdoc:
  swagger-ui:
    disable-swagger-default-url: true
    path: /swagger
logging:
  level:
    org.springframework: debug
    org.springframework.security: debug